doctype html

head
  script(src='/term.js')
  != js('term.client.js')

  meta(http-equiv='cache-control', content='max-age=0')
  meta(http-equiv='cache-control', content='no-cache')
  meta(http-equiv='expires', content='0')
  meta(http-equiv='expires', content='Tue, 01 Jan 1980 1:00:00 GMT')
  meta(http-equiv='pragma', content='no-cache')

  title Compute

  != '<\!-- COMMIT ' + commit + ' -->'
  != '<\!-- PORT ' + port + ' -->'

  // CSS
  link(href='/css/font-awesome.min.css', rel='stylesheet')
  != css('application')

  script.
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-52357031-1', 'auto');
    ga('send', 'pageview');
  script.
    var _COMPUTE_VERSION = '#{version}';
    var createUsername = '#{createUsername}';
    var useDashForPort = #{useDashForPort};
    var externalUrl = '#{externalUrl}';
    var dirname = '#{dir}';

body(spellcheck='false')
  .loading_backdrop
    span.fa.fa-5x.fa-spin.fa-cog

  include top_bar
  include modals

  include files
  include editor
  include shell
  include html
  include chat
  include plot

  -// todo use newest ace and figure out 'require' nonsense'
  -// FROM //ajaxorg.github.io/ace-builds/src-min-noconflict/ace.js
  script(src='lib/ace/ace.js', charset='utf-8')
  script(src='lib/ace/ext-language_tools.js')
  script.
    ace.require('ace/ext/language_tools');
  script(src='/files#{dir}/CL/cloudlabs_layout.js')

  != js('application')
